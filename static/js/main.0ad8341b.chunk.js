(this["webpackJsonpsplitting-costs-with-friends"]=this["webpackJsonpsplitting-costs-with-friends"]||[]).push([[0],{337:function(e,t,n){e.exports=n(809)},807:function(e,t,n){},808:function(e,t,n){},809:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(35),o=n.n(i),s=n(8),l=n(22),c=n(5),u=n(133),d=n.n(u),m=n(7),p=(n(500),n(132)),f=(n(205),n(327),n(328)),v={message:null,messageType:null};d.a.initializeApp({apiKey:"AIzaSyD3-RQry2xwkVQNO3JGxfO1xgl3Ru-dsNM",authDomain:"splitting-costs-with-friends.firebaseapp.com",databaseURL:"https://splitting-costs-with-friends.firebaseio.com",projectId:"splitting-costs-with-friends",storageBucket:"splitting-costs-with-friends.appspot.com",messagingSenderId:"72392180758",appId:"1:72392180758:web:f0d19e211d379aa8492137"});d.a.firestore();var h=Object(m.b)({firebase:c.firebaseReducer,firestore:p.firestoreReducer,data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FRIENDS":return t.payload;default:return e}},notify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFY_USER":return Object(f.a)({},e,{message:t.message,messageType:t.messageType});default:return e}},expenseData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_EXPENSES":return t.payload;default:return e}}}),b=Object(m.d)(h,{},Object(m.c)(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),E={firebase:d.a,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:b.dispatch,createFirestoreInstance:p.createFirestoreInstance},g=b,y=n(336),N=n(9),O=n(10),w=n(11),j=n(12),x=(n(532),n(200)),I=n.n(x),k=n(206),C=n(329),F=n.n(C);function P(){return r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}var T=I()({}),A=(F()(),Object(k.connectedRouterRedirect)({wrapperDisplayName:"UserIsAuthenticated",AuthenticatingComponent:P,allowRedirectBack:!0,redirectPath:function(e,t){return T.getRedirectQueryParam(t)||"/login"},authenticatingSelector:function(e){var t=e.firebase,n=t.auth,a=(t.profile,t.isInitializing);return!n.isLoaded||!0===a},authenticatedSelector:function(e){var t=e.firebase.auth;return t.isLoaded&&!t.isEmpty}})),S=Object(k.connectedRouterRedirect)({wrapperDisplayName:"UserIsNotAuthenticated",AuthenticatingComponent:P,allowRedirectBack:!1,redirectPath:function(e,t){return T.getRedirectQueryParam(t)||"/"},authenticatingSelector:function(e){var t=e.firebase,n=t.auth,a=t.isInitializing;return!n.isLoaded||!0===a},authenticatedSelector:function(e){var t=e.firebase.auth;return t.isLoaded&&t.isEmpty}}),R=n(52),D=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(N.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isAuthenticated:!1},e.onLogoutClick=function(t){t.preventDefault(),e.props.firebase.logout()},e}return Object(O.a)(n,[{key:"render",value:function(){var e=this.state.isAuthenticated,t=this.props.auth;return r.a.createElement("div",{className:"navbar navbar-expand-md navbar-dark bg-dark mb-4"},r.a.createElement("div",{className:"container"},r.a.createElement(l.b,{to:"/",className:"navbar-brand"},"Splitting Costs with Friends!"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarMain"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarMain"},e?r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"#!",className:"nav-link"},t.email)),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"#!",className:"nav-link",onClick:this.onLogoutClick},"Logout"))):null,e?null:r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/login",className:"nav-link"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/register",className:"nav-link"},"Register"))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.auth.uid?{isAuthenticated:!0}:{isAuthenticated:!1}}}]),n}(a.Component),L=Object(m.c)(Object(c.firebaseConnect)(),Object(s.connect)((function(e,t){return{auth:e.firebase.auth}})))(D),M=n(13),z=n.n(M),H=n(24),U=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(N.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={showForm:!1,tripName:""},e.inputChange=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e.formSubmit=function(t){t.preventDefault();var n=e.state.tripName,a=e.props,r=a.firestore,i={collection:"users",doc:a.uid,subcollections:[{collection:"trips"}]};r.add(i,{tripName:n}).then((function(e){console.log("Document written with ID: ",e.id)})),e.setState({tripName:""})},e.renderForm=function(){var t=e.state,n=t.showForm,a=t.tripName;if(n)return r.a.createElement("div",{className:"card mt-3 pl-1"},r.a.createElement("div",{className:"card-header"},"Add Expense"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:e.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Trip Name"),r.a.createElement("input",{value:a,className:"form-control",onChange:e.inputChange,id:"tripName",type:"text",name:"tripName"})),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-success btn-block"}))))},e}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.state.showForm;return r.a.createElement("div",null,t?r.a.createElement("button",{className:"btn btn-danger btn-block",onClick:function(){return e.setState({showForm:!t})}},"Close"):r.a.createElement("button",{className:"btn btn-secondary btn-block",onClick:function(){return e.setState({showForm:!t})}},"Add Trip"," "),r.a.createElement("div",null,r.a.createElement("div",{className:""},this.renderForm())))}}]),n}(a.Component),_=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"expenses",storeAs:"expense"},{collection:"friends",storeAs:"friend"},{collection:"users",doc:e.uid,subcollections:[{collection:"trips"}],storeAs:"".concat(e.uid,"-trips")}]})),Object(s.connect)((function(e,t){var n=e.firestore.data;return{expenses:n.expenses,friends:n.friends,trips:n["".concat(t.uid,"-trips")]}})))(U),V=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(N.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={showForm:!1,tripID:""},e.renderForm=function(){var t=e.state.showForm,n=e.props,a=n.trips;n.uid;if(!t)return r.a.createElement("ul",{className:"list-group mt-4"},r.a.createElement("li",{className:"list-group-item active"},"All Trips"),a?a.map((function(e){return r.a.createElement("li",{className:"list-group-item",key:e.id},r.a.createElement(l.b,{to:{pathname:"/trip/".concat(e.id)}},e.tripName))})):r.a.createElement(P,null))},e}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.state.showForm;console.log(this.props);var n=this.props;n.trips,n.uid;return r.a.createElement("div",null,t?r.a.createElement("button",{className:"btn btn-secondary mt-4 btn-block",onClick:function(){return e.setState({showForm:!t})}},"Display All Trips"):r.a.createElement("button",{className:"btn btn-danger mt-4 btn-block",onClick:function(){return e.setState({showForm:!t})}},"Close Trip List"),r.a.createElement("div",null,r.a.createElement("div",{className:""},this.renderForm())))}}]),n}(a.Component),$=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,subcollections:[{collection:"trips"}],storeAs:"".concat(e.uid,"-trips")}]})),Object(s.connect)((function(e,t){return{trips:e.firestore.ordered["".concat(t.uid,"-trips")]}})))(V),q=n(211),B=n(4);function W(e){var t=e.friends;return r.a.createElement("option",{value:t.id},t.firstName)}var X=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).state={friendsInvolved:a.props.friendsInvolved},a.inputChangeMultiple=function(e){console.log(e.target.selectedOptions),a.setState({friendsInvolved:Array.from(e.target.selectedOptions,(function(e){return e.value}))});z.a.map(e.target.selectedOptions,(function(e,t){return e.value}))},a.formSubmit=function(e){e.preventDefault();var t=a.props,n=t.firestore,r=t.tripId,i=t.expenseId,o=t.uid,s={name:a.nameInput.current.value,expenseAmount:Number(a.amountInput.current.value),friendsInvolved:a.state.friendsInvolved,whoPaid:a.whoPaidInput.current.value};n.update({collection:"users",doc:o,storeAs:"".concat(r,"-expense"),subcollections:[{collection:"trips",doc:r},{collection:"expenses",doc:i}]},s)},a.nameInput=r.a.createRef(),a.amountInput=r.a.createRef(),a.friendsInvolvedInput=r.a.createRef(),a.whoPaidInput=r.a.createRef(),a}return Object(O.a)(n,[{key:"renderFriend",value:function(){var e=this.props,t=e.friends,n=e.whoPaid;return r.a.createElement("select",{multiple:!1,defaultValue:n,className:"form-control",id:"whoPaid",type:"text",name:"whoPaid",ref:this.whoPaidInput},r.a.createElement("option",{value:""},"Select Option"),z.a.map(t,(function(e,t){return r.a.createElement("option",{value:e.id},e.firstName)})))}},{key:"renderFriendsInvolved",value:function(){var e=this.props,t=e.friendsInvolved,n=e.friends,a=e.uid;console.log(this.props);var i=r.a.createElement("select",{multiple:!0,defaultValue:t,onChange:this.inputChangeMultiple,className:"form-control",id:"friendsInvolved",type:"text"},z.a.map(n,(function(e,t){return r.a.createElement(W,{key:e.id,friends:e,uid:a})})));return r.a.createElement("div",null,i)}},{key:"render",value:function(){var e=this.props,t=e.expense,n=e.amount;return console.log(this.props),this.props?r.a.createElement("div",null,r.a.createElement("div",{className:"card mb-4 mt-4 "},r.a.createElement("div",{className:"card-header"},"Edit Expense"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Expense Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"expense name",minLength:"2",required:!0,ref:this.nameInput,defaultValue:t})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"expenseAmount"},"Amount"),r.a.createElement("input",{type:"number",className:"form-control",name:"amount",minLength:"1",required:!0,ref:this.amountInput,defaultValue:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Friends Involved ",""),this.renderFriendsInvolved()),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Who Paid"),this.renderFriend()),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-block"}))))):r.a.createElement(P,null)}}]),n}(a.Component),Q=n(331),J=n.n(Q),Y=(n(561),function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).handleDelete=function(){var e=a.props,t=e.expense,n=e.firestore,r=e.tripId,i=e.uid;n.delete({collection:"users",doc:i,storeAs:"".concat(r.id,"-expenses"),subcollections:[{collection:"trips",doc:r},{collection:"expenses",doc:t.id}]})},a.handleInputChange=function(e){var t=e.target,n="isIncluded"===t.name?t.checked:t.value,r=t.name;a.setState(Object(H.a)({},r,n))},a.addIncluded=function(e,t){var n=a.props,r=n.firestore,i=n.tripId,o=n.uid,s={friendsInvolved:e.friendsInvolved.concat(t)};console.log("Added: "+e.id,t),r.update({collection:"users",doc:o,storeAs:"".concat(i,"-expenses"),subcollections:[{collection:"trips",doc:i},{collection:"expenses",doc:e.id}]},s)},a.removeIncluded=function(e,t){var n=a.props,r=n.firestore,i=n.tripId,o=n.uid;console.log("Removed: "+e,t);var s={friendsInvolved:e.friendsInvolved.filter((function(e){return!t.includes(e)}))};r.update({collection:"users",doc:o,storeAs:"".concat(i,"-expenses"),subcollections:[{collection:"trips",doc:i},{collection:"expenses",doc:e.id}]},s)},a.state={isIncluded:!1,showForm:!1},a}return Object(O.a)(n,[{key:"renderWhoPaid",value:function(e){var t=this.props.friendsObj;return t&&t[e]?r.a.createElement(B.Td,null,t[e].firstName):r.a.createElement(B.Td,null,"''")}},{key:"renderEditForm",value:function(e){var t=this.state.showForm,n=this.props,a=n.expense,i=n.friends,o=n.firestore,s=n.tripId,l=n.uid;if(t)return r.a.createElement(X,{expenseId:e,expense:a.name,amount:a.expenseAmount,friendsInvolved:a.friendsInvolved,whoPaid:a.whoPaid,friends:i,tripId:s,firestore:o,uid:l})}},{key:"renderExpenseTable",value:function(){var e=this,t=this.props,n=(t.expensesObj,t.expense),a=t.friends,i=(t.friendsObj,this.state.showForm),o=r.a.createElement("svg",{className:"bi bi-pencil-square",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",cursor:"pointer"},r.a.createElement("path",{d:"M15.502 1.94a.5.5 0 010 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 01.707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 00-.121.196l-.805 2.414a.25.25 0 00.316.316l2.414-.805a.5.5 0 00.196-.12l6.813-6.814z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 002.5 15h11a1.5 1.5 0 001.5-1.5v-6a.5.5 0 00-1 0v6a.5.5 0 01-.5.5h-11a.5.5 0 01-.5-.5v-11a.5.5 0 01.5-.5H9a.5.5 0 000-1H2.5A1.5 1.5 0 001 2.5v11z",clipRule:"evenodd"}));return r.a.createElement(B.Tr,{key:this.props.key},r.a.createElement(B.Td,null,n.name,this.renderEditForm(n.id),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("svg",{className:"bi bi-trash-fill ml-2",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",onClick:this.handleDelete,cursor:"pointer"},r.a.createElement("path",{fillRule:"evenodd",d:"M2.5 1a1 1 0 00-1 1v1a1 1 0 001 1H3v9a2 2 0 002 2h6a2 2 0 002-2V4h.5a1 1 0 001-1V2a1 1 0 00-1-1H10a1 1 0 00-1-1H7a1 1 0 00-1 1H2.5zm3 4a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7a.5.5 0 01.5-.5zM8 5a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7A.5.5 0 018 5zm3 .5a.5.5 0 00-1 0v7a.5.5 0 001 0v-7z",clipRule:"evenodd"})),r.a.createElement("span",{className:"ml-2",onClick:function(){return e.setState({showForm:!i})}},i?r.a.createElement("button",{className:"btn-danger"},r.a.createElement("i",null,"Close")):o))),this.renderWhoPaid(n.whoPaid),r.a.createElement(B.Td,null,"$",parseFloat(n.expenseAmount/n.friendsInvolved.length).toFixed(2)),z.a.map(a,(function(t,a){return r.a.createElement(B.Td,{key:a},r.a.createElement(J.a,{checked:n.friendsInvolved.includes(t.id),value:t.id,name:"isIncluded",onChange:function(){n.friendsInvolved.includes(t.id)?e.removeIncluded(n,t.id):e.addIncluded(n,t.id)}}))})),r.a.createElement(B.Td,null,"$",parseFloat(n.expenseAmount).toFixed(2)))}},{key:"render",value:function(){return this.renderExpenseTable()}}]),n}(a.Component)),G=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,storeAs:"".concat(e.tripId,"-expenses"),subcollections:[{collection:"trips",doc:e.tripId},{collection:"expenses"}]},{collection:"users",doc:e.uid,storeAs:"".concat(e.tripId,"-friends"),subcollections:[{collection:"trips",doc:e.tripId},{collection:"friends"}]}]})),Object(s.connect)((function(e,t){return{friendsObj:e.firestore.data["".concat(t.tripId,"-friends")]}})))(Y);function K(e){return Object(c.useFirestoreConnect)((function(){return[{collection:"friends",doc:e}]})),Object(s.useSelector)((function(t){var n=t.firestore.data;return n.friends&&n.friends[e]}))}var Z=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).addTotalExpenses=function(){var e=a.props.expenses,t=0;for(var n in e)t+=Number(e[n].expenseAmount);return t},a.addTotalPaidExpenses=function(e){var t=0;for(var n in e)t+=Number(e[n]);return t},a.state={showForm:!1,expense:"",amount:0,friendsInvolved:[""],whoPaid:"",total:0,totals:{}},a}return Object(O.a)(n,[{key:"renderFriend",value:function(){var e=this.props.friends,t=r.a.createElement("select",{multiple:!1,value:this.state.whoPaid,onChange:this.inputChange,id:"whoPaid",type:"text",name:"whoPaid"},r.a.createElement("option",{value:""},"Select Option"),z.a.map(e,(function(e,t){return r.a.createElement(K,{key:e.id,friends:e})})));return Object(c.isEmpty)(e)?r.a.createElement(P,null):r.a.createElement("div",null,t)}},{key:"renderFriendsInvolved",value:function(){var e=this,t=this.props.friends,n=this.state.friendsInvolved,a=r.a.createElement("select",{multiple:!0,value:n,onChange:this.inputChangeMultiple,id:"friendsInvolved",type:"text"},z.a.map(t,(function(t,n){return r.a.createElement(W,{key:t.id,friends:t,uid:e.props.uid})})));return r.a.createElement("div",null,a)}},{key:"renderExpense",value:function(){var e=this,t=this.props,n=t.expenses,a=t.friends,i=t.firestore,o=t.tripId,s=z.a.map(n,(function(t,n){return r.a.createElement(G,{key:n,expense:t,friends:a,firestore:i,tripId:o,uid:e.props.uid})}));return Object(c.isEmpty)(n)||Object(c.isEmpty)(a)?r.a.createElement(B.Tr,null,r.a.createElement(B.Td,{className:"mt-4"},r.a.createElement("h4",null,"You have no expenses logged!"))):s}},{key:"totalPerPerson",value:function(){var e=this.props,t=e.friends,n=e.expenses,a={};return Object(c.isEmpty)(n)||Object(c.isEmpty)(t)||z.a.map(t,(function(e,t){var r,i=Object(q.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(a[e.id]&&o.friendsInvolved.includes(e.id)){var s=o.expenseAmount/o.friendsInvolved.length;a[e.id]+=s}else if(!a[e.id]&&o.friendsInvolved.includes(e.id)){var l=o.expenseAmount/o.friendsInvolved.length;a[e.id]=l}}}catch(c){i.e(c)}finally{i.f()}})),a}},{key:"renderTotalPerPerson",value:function(e){var t=this.props.friends;return z.a.map(t,(function(t,n){return e[t.id]?r.a.createElement(B.Td,{key:t.id},"$",parseFloat(e[t.id]).toFixed(2)):r.a.createElement(B.Td,{key:t.id},"$0")}))}},{key:"totalAmountPaidPerPerson",value:function(){var e=this.props,t=e.friends,n=e.expenses,a={};return Object(c.isEmpty)(n)||Object(c.isEmpty)(t)||z.a.map(t,(function(e,t){var r,i=Object(q.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(a[e.id]&&o.whoPaid.includes(e.id)){var s=o.expenseAmount;a[e.id]+=s}else if(!a[e.id]&&o.whoPaid.includes(e.id)){var l=o.expenseAmount;a[e.id]=l}else a[e.id]||(a[e.id]=0)}}catch(c){i.e(c)}finally{i.f()}})),a}},{key:"renderTotalAmountPaidPerPerson",value:function(){var e=this.props.friends,t=this.totalAmountPaidPerPerson();return z.a.map(e,(function(e,n){return t[e.id]?r.a.createElement(B.Td,{key:e.id},"$",t[e.id].toFixed(2)):r.a.createElement(B.Td,{key:e.id},"$0")}))}},{key:"renderTotalDifferencePerPerson1",value:function(){var e=this.props,t=e.friends,n=e.expenses,a=this.totalAmountPaidPerPerson(),r=this.totalPerPerson(),i={};Object(c.isEmpty)(n)||Object(c.isEmpty)(t)||z.a.map(t,(function(e,t){i[e.id]=0,a[e.id]&&(i[e.id]-=r[e.id]),i[e.id]+=a[e.id]}))}},{key:"renderTotalDifferencePerPerson",value:function(){var e=this.props,t=e.friends,n=e.expenses,a=this.totalAmountPaidPerPerson(),i=this.totalPerPerson(),o={};return Object(c.isEmpty)(n)||Object(c.isEmpty)(t)||z.a.map(t,(function(e,t){o[e.id]=0,o[e.id]+=a[e.id]-i[e.id]})),z.a.map(t,(function(e,t){if(o[e.id])return r.a.createElement(B.Td,{key:e.id},"$",o[e.id].toFixed(2))}))}},{key:"renderFriendHeader",value:function(){var e=this.props.friends,t=z.a.map(e,(function(e,t){return r.a.createElement(B.Th,{key:t},e.firstName)}));if(!Object(c.isEmpty)(e))return t}},{key:"render",value:function(){return r.a.createElement(B.Table,{key:z.a.map(this.props.friends,(function(e,t){return t})),className:"table table-striped table-bordered"},r.a.createElement(B.Thead,null,r.a.createElement(B.Tr,null,r.a.createElement(B.Th,null,"Expense Name"),r.a.createElement(B.Th,null,"Who Paid"),r.a.createElement(B.Th,null,"Cost Per Person"),this.renderFriendHeader(),r.a.createElement(B.Th,null,"Expense Amount"))),r.a.createElement(B.Tbody,null,this.renderExpense(),r.a.createElement(B.Tr,null,r.a.createElement(B.Th,{colSpan:"3"},"Total Owed"),this.renderTotalPerPerson(this.totalPerPerson()),r.a.createElement(B.Td,{className:"table-success",style:{color:"black"}},r.a.createElement("strong",null,"$",this.addTotalPaidExpenses(this.totalPerPerson())))),r.a.createElement(B.Tr,null,r.a.createElement(B.Th,{colSpan:"3"},"Total Paid"),this.renderTotalAmountPaidPerPerson(),r.a.createElement(B.Td,{className:"table-success",style:{color:"black"}},r.a.createElement("strong",null,"$",this.addTotalPaidExpenses(this.totalAmountPaidPerPerson())))),r.a.createElement(B.Tr,null,r.a.createElement(B.Th,{colSpan:"3"},"Difference"),this.renderTotalDifferencePerPerson())))}}]),n}(a.Component),ee=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,storeAs:"".concat(e.tripId,"-expenses"),subcollections:[{collection:"trips",doc:e.tripId},{collection:"expenses"}]},{collection:"users",doc:e.uid,storeAs:"".concat(e.tripId,"-friends"),subcollections:[{collection:"trips",doc:e.tripId},{collection:"friends"}]}]})),Object(s.connect)((function(e,t){var n=e.firestore.ordered;return{expenses:n["".concat(t.tripId,"-expenses")],friends:n["".concat(t.tripId,"-friends")]}})))(Z),te=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(N.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={showForm:!1,expense:"",amount:0,friendsInvolved:[""],whoPaid:"",total:0},e.inputChange=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e.inputChangeMultiple=function(t){e.setState({friendsInvolved:Array.from(t.target.selectedOptions,(function(e){return e.value}))})},e.formSubmit=function(t){t.preventDefault();var n=e.state,a=n.expense,r=n.amount,i=n.friendsInvolved,o=n.whoPaid,s=e.props,l=s.firestore,c=s.uid;l.add({collection:"users",doc:c,subcollections:[{collection:"trips",doc:e.props.id},{collection:"expenses"}]},{name:a,expenseAmount:Number(r),friendsInvolved:i,whoPaid:o}).then((function(e){console.log("Document written with ID: ",e.id)})),e.setState({expense:"",amount:0,friendsInvolved:[""],whoPaid:""})},e.renderForm=function(){var t=e.state,n=t.showForm,a=t.expense,i=t.amount;if(n)return r.a.createElement("div",{className:"card mt-3 pl-1"},r.a.createElement("div",{className:"card-header"},"Add Expense"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:e.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Expense Name"),r.a.createElement("input",{value:a,className:"form-control",onChange:e.inputChange,id:"friendNext",type:"text",name:"expense"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Amount"),r.a.createElement("input",{value:i,onChange:e.inputChange,className:"form-control",type:"number",id:"amount",name:"amount"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Friends Involved ",""),e.renderFriendsInvolved()),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Who Paid"),e.renderFriend()),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-success btn-block"}))))},e}return Object(O.a)(n,[{key:"renderFriend",value:function(){var e=this.props.friends;return r.a.createElement("select",{multiple:!1,value:this.state.whoPaid,onChange:this.inputChange,className:"form-control",id:"whoPaid",type:"text",name:"whoPaid"},r.a.createElement("option",{value:""},"Select Option"),z.a.map(e,(function(e,t){return r.a.createElement("option",{value:e.id},e.firstName)})))}},{key:"renderFriendsInvolved",value:function(){var e=this.props.friends,t=this.state.friendsInvolved,n=r.a.createElement("select",{multiple:!0,value:t,onChange:this.inputChangeMultiple,className:"form-control",id:"friendsInvolved",type:"text"},z.a.map(e,(function(e,t){return r.a.createElement(W,{key:e.id,friends:e})})));return r.a.createElement("div",null,n)}},{key:"render",value:function(){var e=this,t=this.state.showForm;return r.a.createElement("div",{style:{}},t?r.a.createElement("button",{className:"btn btn-danger btn-block mt-4",onClick:function(){return e.setState({showForm:!t})}},"Close"):r.a.createElement("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(){return e.setState({showForm:!t})}},"Add Expense"," "),r.a.createElement("div",null,r.a.createElement("div",{className:""},this.renderForm())))}}]),n}(a.Component),ne=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,storeAs:"".concat(e.id,"-expenses"),subcollections:[{collection:"trips",doc:e.id},{collection:"expenses"}]},{collection:"users",doc:e.uid,storeAs:"".concat(e.id,"-friends"),subcollections:[{collection:"trips",doc:e.id},{collection:"friends"}]}]})),Object(s.connect)((function(e,t){var n=e.firestore.ordered;return{friends:n["".concat(t.id,"-friends")],expenses:n["".concat(t.id,"-expenses")]}})))(te);function ae(e){return r.a.createElement("div",{className:"pl-4 pr-4"},r.a.createElement(ee,{tripId:e.id,uid:e.uid}))}var re=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).formSubmit=function(e){e.preventDefault();var t=a.props,n=t.firestore,r=t.friend,i={firstName:a.firstNameInput.current.value};n.update({collection:"friends",doc:r.id},i)},a.firstNameInput=r.a.createRef(),a}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.friend;return this.props?r.a.createElement("div",null,r.a.createElement("div",{className:"card mb-4 mt-4 "},r.a.createElement("div",{className:"card-header"},"Edit Friend"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"firstName",minLength:"2",required:!0,ref:this.firstNameInput,defaultValue:e.firstName})),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-block"}))))):r.a.createElement(P,null)}}]),n}(a.Component),ie=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"friends",storeAs:"friend",doc:e.id}]})),Object(s.connect)((function(e,t){var n=e.firestore.data;return{friend:n.friend&&n.friend[t.id]}})))(re),oe=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(N.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={showForm:!1},e.handleDelete=function(){var t=e.props,n=t.friends,a=t.firestore,r=t.uid;a.delete({collection:"users",doc:r,subcollections:[{collection:"trips",doc:e.props.tripId},{collection:"friends",doc:n.id}]})},e}return Object(O.a)(n,[{key:"renderWhoseInvolved",value:function(e){var t=this.props.friend;return r.a.createElement(B.Td,null,t[e].firstName)}},{key:"renderEditForm",value:function(e){if(this.state.showForm)return r.a.createElement(ie,{id:e,firstName:this.props.friend.firstName})}},{key:"render",value:function(){var e=this,t=r.a.createElement("svg",{className:"bi bi-pencil-square",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",cursor:"pointer"},r.a.createElement("path",{d:"M15.502 1.94a.5.5 0 010 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 01.707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 00-.121.196l-.805 2.414a.25.25 0 00.316.316l2.414-.805a.5.5 0 00.196-.12l6.813-6.814z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 002.5 15h11a1.5 1.5 0 001.5-1.5v-6a.5.5 0 00-1 0v6a.5.5 0 01-.5.5h-11a.5.5 0 01-.5-.5v-11a.5.5 0 01.5-.5H9a.5.5 0 000-1H2.5A1.5 1.5 0 001 2.5v11z",clipRule:"evenodd"})),n=this.props.friends,a=this.state.showForm;return r.a.createElement(B.Tbody,null,r.a.createElement(B.Tr,{key:n.id},r.a.createElement(B.Td,null,n.firstName," ",r.a.createElement("div",{style:{float:"right"}},r.a.createElement("svg",{className:"bi bi-trash-fill ml-2",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",onClick:this.handleDelete,cursor:"pointer"},r.a.createElement("path",{fillRule:"evenodd",d:"M2.5 1a1 1 0 00-1 1v1a1 1 0 001 1H3v9a2 2 0 002 2h6a2 2 0 002-2V4h.5a1 1 0 001-1V2a1 1 0 00-1-1H10a1 1 0 00-1-1H7a1 1 0 00-1 1H2.5zm3 4a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7a.5.5 0 01.5-.5zM8 5a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7A.5.5 0 018 5zm3 .5a.5.5 0 00-1 0v7a.5.5 0 001 0v-7z",clipRule:"evenodd"})),this.renderEditForm(n.id),r.a.createElement("span",{className:"ml-2",onClick:function(){return e.setState({showForm:!a})}},a?r.a.createElement("button",null,r.a.createElement("i",null,"Close")):t)))))}}]),n}(a.Component),se=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).inputChange=function(e){a.setState(Object(H.a)({},e.target.name,e.target.value))},a.formSubmit=function(e){e.preventDefault();var t=a.props,n=t.firestore,r=t.uid,i=a.state.firstName;n.add({collection:"users",doc:r,subcollections:[{collection:"trips",doc:a.props.id},{collection:"friends"}]},{firstName:i}).then((function(e){console.log("Document written with ID: ",e.id)})),a.setState({firstName:""})},a.renderForm=function(){var e=a.state,t=e.showForm,n=e.firstName;if(t)return r.a.createElement("div",{className:"card mb-4 mt-4 "},r.a.createElement("div",{className:"card-header"},"Add Friend"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:a.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{value:n,onChange:a.inputChange,id:"friendNext",type:"text",className:"form-control",name:"firstName"})),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-block"}))))},a.renderFriend=function(e){var t=a.props,n=t.friends,i=t.uid,o=z.a.map(n,(function(e,t){return r.a.createElement(oe,{key:e.id,friends:e,tripId:a.props.id,firestore:a.props.firestore,uid:i})}));return n?o:r.a.createElement(B.Tbody,null,r.a.createElement(B.Tr,null,r.a.createElement(B.Td,null,"Loading")))},a.state={showForm:!1,firstName:""},a}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.state.showForm;return r.a.createElement("div",null,t?r.a.createElement("button",{className:"btn btn-danger btn-block mt-4",onClick:function(){return e.setState({showForm:!t})}},"Close"):r.a.createElement("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(){return e.setState({showForm:!t})}},"Add Friend"),this.renderForm(),r.a.createElement(B.Table,{className:" mt-4"},r.a.createElement(B.Thead,null,r.a.createElement(B.Tr,null,r.a.createElement(B.Th,null,"Friend Name"))),this.renderFriend()))}}]),n}(a.Component),le=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,storeAs:"".concat(e.id,"-friends"),subcollections:[{collection:"trips",doc:e.id},{collection:"friends"}]}]})),Object(s.connect)((function(e,t){return{friends:e.firestore.ordered["".concat(t.id,"-friends")]}})))(se);function ce(e){var t=Object(R.f)().id;return r.a.createElement("div",null,r.a.createElement("div",{className:"alert alert-info mt-4",role:"alert"},"Add friend or friends prior to adding expense!"),r.a.createElement(r.a.Fragment,null,e?r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{uid:e.uid}),r.a.createElement($,{uid:e.uid})):null),r.a.createElement(R.a,{path:"/trip/:id",render:function(){return r.a.createElement("div",null,r.a.createElement(ne,{id:t,uid:e.uid}),r.a.createElement(le,{id:t,uid:e.uid}))}}))}var ue=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",{className:"mainView"},r.a.createElement("div",{className:"mainViewContainer"},r.a.createElement(ae,{id:this.props.id,uid:this.props.uid})))}}]),n}(a.Component),de=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this;this.props.trips;return r.a.createElement("div",null,this.props.uid?r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("div",{style:{width:"45rem"}},r.a.createElement(_,{uid:this.props.uid}),r.a.createElement($,{uid:this.props.uid}))),r.a.createElement("div",null,r.a.createElement(R.a,{path:"/trip/:id",render:function(t){var n=t.match;return r.a.createElement(ue,{id:n.params.id,uid:e.props.uid})}}))))):r.a.createElement(P,null))}}]),n}(a.Component),me=(Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,subcollections:[{collection:"trips"}],storeAs:"".concat(e.uid,"-trips")}]})),Object(s.connect)((function(e,t){return{trips:e.firestore.data["".concat(t.uid,"-trips")]}})))(de),function(e,t){return{type:"NOTIFY_USER",message:e,messageType:t}}),pe=n(203),fe=n.n(pe),ve=function(e){var t=e.message,n=e.messageType;return r.a.createElement("div",{className:fe()("alert",{"alert-success":"success"===n,"alert-danger":"error"===n})},t)},he=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(N.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.onSubmit=function(t){t.preventDefault();var n=e.props,a=n.firebase,r=n.notifyUser,i=e.state,o=i.email,s=i.password;a.login({email:o,password:s}).catch((function(e){return r("Invalid Login Info","error")})).then(e.props.history.push("/"))},e.onChange=function(t){return e.setState(Object(H.a)({},t.target.name,t.target.value))},e}return Object(O.a)(n,[{key:"render",value:function(){console.log(this.props),console.log(this.state);var e=this.props.notify,t=e.message,n=e.messageType;return r.a.createElement("div",{className:"col-md-6 mx-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},t?r.a.createElement(ve,{message:t,messageType:n}):null,r.a.createElement("h1",{className:"text-center pb-4 pt-3"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("i",{className:"fa fa-lock"}),"","Login")),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"text",className:"form-control",name:"email",required:!0,value:this.state.email,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",required:!0,value:this.state.password,onChange:this.onChange})),r.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"})))))}}]),n}(a.Component),be=Object(m.c)(Object(c.firebaseConnect)(),Object(s.connect)((function(e,t){return{notify:e.notify}}),{notifyUser:me}))(he),Ee=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(N.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.onSubmit=function(t){t.preventDefault();var n=e.props,a=n.firebase,r=n.notifyUser,i=e.state,o=i.email,s=i.password;a.createUser({email:o,password:s}).catch((function(e){return r("User Already Exists","error")})).then(e.props.history.push("/"))},e.onChange=function(t){return e.setState(Object(H.a)({},t.target.name,t.target.value))},e}return Object(O.a)(n,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.props.notify,t=e.message,n=e.messageType;return r.a.createElement("div",{className:"col-md-6 mx-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},t?r.a.createElement(ve,{message:t,messageType:n}):null,r.a.createElement("h1",{className:"text-center pb-4 pt-3"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("i",{className:"fa fa-lock"})," Register")),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"text",className:"form-control",name:"email",required:!0,value:this.state.email,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",required:!0,value:this.state.password,onChange:this.onChange})),r.a.createElement("input",{type:"submit",value:"Register",className:"btn btn-primary btn-block"})))))}}]),n}(a.Component),ge=Object(m.c)(Object(c.firebaseConnect)(),Object(s.connect)((function(e,t){return{notify:e.notify}}),{notifyUser:me}))(Ee),ye=(n(562),function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.auth,a=Object(y.a)(t,["auth"]);return r.a.createElement(l.a,{basename:"/splitting-costs-with-friends"},r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(L,null)),r.a.createElement("nav",null,r.a.createElement(R.c,null,r.a.createElement(R.a,Object.assign({},a,{exact:!0,path:"/",component:this.UserIsAuthenticated=function(){return n.uid?r.a.createElement(ce,{uid:n.uid}):null}})),r.a.createElement(R.a,Object.assign({},a,{exact:!0,path:"/trip/:id",component:this.UserIsAuthenticated=function(e){var t=e.match;return n.uid?r.a.createElement(ce,{id:t.params.id,uid:n.uid}):null}})))),r.a.createElement("main",null,r.a.createElement(R.c,null,r.a.createElement(R.a,{exact:!0,path:"/login",component:S(be)}),r.a.createElement(R.a,{exact:!0,path:"/register",component:S(ge)}),r.a.createElement(R.a,{exact:!0,path:"/",component:A((function(){return r.a.createElement("h1",null,"Select trip from left sidebar")}))}),r.a.createElement(R.a,{exact:!0,path:"/trip/:id",render:this.UserIsAuthenticated=function(t){var n=t.match;return e.props.auth.uid?r.a.createElement(ee,{tripId:n.params.id,uid:e.props.auth.uid}):null}}),r.a.createElement(R.a,{exact:!0,path:"/",component:S(be)}))),r.a.createElement("footer",{style:{backgroundColor:"lightGrey"}},"Mark Murphy")))}}]),n}(a.Component)),Ne=Object(m.c)(Object(s.connect)((function(e){return{auth:e.firebase.auth}})))(ye);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(807),n(808);o.a.render(r.a.createElement(s.Provider,{store:g},r.a.createElement(c.ReactReduxFirebaseProvider,E,r.a.createElement(l.a,null,r.a.createElement(Ne,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[337,1,2]]]);
//# sourceMappingURL=main.0ad8341b.chunk.js.map