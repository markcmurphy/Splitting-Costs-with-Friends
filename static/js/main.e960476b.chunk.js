(this["webpackJsonpsplitting-costs-with-friends"]=this["webpackJsonpsplitting-costs-with-friends"]||[]).push([[0],{335:function(e,t,n){e.exports=n(803)},530:function(e,t,n){},802:function(e,t,n){},803:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(35),l=n.n(i),o=n(8),s=n(22),c=n(5),u=n(133),d=n.n(u),m=n(7),p=(n(498),n(132)),f=(n(204),n(326),n(327)),v={message:null,messageType:null};d.a.initializeApp({apiKey:"AIzaSyD3-RQry2xwkVQNO3JGxfO1xgl3Ru-dsNM",authDomain:"splitting-costs-with-friends.firebaseapp.com",databaseURL:"https://splitting-costs-with-friends.firebaseio.com",projectId:"splitting-costs-with-friends",storageBucket:"splitting-costs-with-friends.appspot.com",messagingSenderId:"72392180758",appId:"1:72392180758:web:f0d19e211d379aa8492137"});d.a.firestore();var h=Object(m.b)({firebase:c.firebaseReducer,firestore:p.firestoreReducer,data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FRIENDS":return t.payload;default:return e}},notify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFY_USER":return Object(f.a)({},e,{message:t.message,messageType:t.messageType});default:return e}},expenseData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_EXPENSES":return t.payload;default:return e}}}),b=Object(m.d)(h,{},Object(m.c)(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),E={firebase:d.a,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:b.dispatch,createFirestoreInstance:p.createFirestoreInstance},g=b,y=n(9),N=n(10),O=n(11),w=n(12),j=(n(530),n(531),n(200)),x=n.n(j),I=n(205),k=n(328),C=n.n(k);function P(){return r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}var F=x()({}),T=(C()(),Object(I.connectedRouterRedirect)({wrapperDisplayName:"UserIsAuthenticated",AuthenticatingComponent:P,allowRedirectBack:!0,redirectPath:function(e,t){return F.getRedirectQueryParam(t)||"/login"},authenticatingSelector:function(e){var t=e.firebase,n=t.auth,a=(t.profile,t.isInitializing);return!n.isLoaded||!0===a},authenticatedSelector:function(e){var t=e.firebase.auth;return t.isLoaded&&!t.isEmpty}})),A=Object(I.connectedRouterRedirect)({wrapperDisplayName:"UserIsNotAuthenticated",AuthenticatingComponent:P,allowRedirectBack:!1,redirectPath:function(e,t){return F.getRedirectQueryParam(t)||"/"},authenticatingSelector:function(e){var t=e.firebase,n=t.auth,a=t.isInitializing;return!n.isLoaded||!0===a},authenticatedSelector:function(e){var t=e.firebase.auth;return t.isLoaded&&t.isEmpty}}),S=n(52),R=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(y.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isAuthenticated:!1},e.onLogoutClick=function(t){t.preventDefault(),e.props.firebase.logout()},e}return Object(N.a)(n,[{key:"render",value:function(){var e=this.state.isAuthenticated,t=this.props.auth;return r.a.createElement("div",{className:"navbar navbar-expand-md navbar-dark bg-primary mb-4"},r.a.createElement("div",{className:"container"},r.a.createElement(s.b,{to:"/",className:"navbar-brand"},"Splitting Costs with Friends!"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarMain"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarMain"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},e?r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/",className:"nav-link"},"Dashboard")):null),e?r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"#!",className:"nav-link"},t.email)),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"#!",className:"nav-link",onClick:this.onLogoutClick},"Logout"))):null,e?null:r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/login",className:"nav-link"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/register",className:"nav-link"},"Register"))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.auth.uid?{isAuthenticated:!0}:{isAuthenticated:!1}}}]),n}(a.Component),D=Object(m.c)(Object(c.firebaseConnect)(),Object(o.connect)((function(e,t){return{auth:e.firebase.auth}})))(R),L=n(13),z=n.n(L),M=n(24),H=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(y.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={showForm:!1,tripName:""},e.inputChange=function(t){e.setState(Object(M.a)({},t.target.name,t.target.value))},e.formSubmit=function(t){t.preventDefault();var n=e.state.tripName,a=e.props,r=a.firestore,i={collection:"users",doc:a.uid,subcollections:[{collection:"trips"}]};r.add(i,{tripName:n}).then((function(e){console.log("Document written with ID: ",e.id)})),e.setState({tripName:""})},e.renderForm=function(){var t=e.state,n=t.showForm,a=t.tripName;if(n)return r.a.createElement("div",{className:"card  mt-3 pl-1"},r.a.createElement("div",{className:"card-header"},"Add Expense"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:e.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Trip Name"),r.a.createElement("input",{value:a,className:"form-control",onChange:e.inputChange,id:"tripName",type:"text",name:"tripName"})),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-success btn-block"}))))},e}return Object(N.a)(n,[{key:"render",value:function(){var e=this,t=this.state.showForm;return r.a.createElement("div",{style:{marginLeft:"5%",display:"flex",flexDirection:"column",justifyContent:"center"}},t?r.a.createElement("button",{className:"btn btn-danger btn-block mt-4",onClick:function(){return e.setState({showForm:!t})}},"Close"):r.a.createElement("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(){return e.setState({showForm:!t})}},"Add Trip"," "),r.a.createElement("div",null,r.a.createElement("div",{className:""},this.renderForm())))}}]),n}(a.Component),V=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"expenses",storeAs:"expense"},{collection:"friends",storeAs:"friend"},{collection:"users",doc:e.uid,subcollections:[{collection:"trips"}],storeAs:"".concat(e.uid,"-trips")}]})),Object(o.connect)((function(e,t){var n=e.firestore.data;return{expenses:n.expenses,friends:n.friends,trips:n["".concat(t.uid,"-trips")]}})))(H),_=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){console.log(this.props);var e=this.props,t=e.trips;e.uid;return r.a.createElement("ul",null,t?t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(s.b,{to:{pathname:"/trip/".concat(e.id),tripProps:{uid:"uid"}}},e.tripName))})):r.a.createElement(P,null))}}]),n}(a.Component),U=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,subcollections:[{collection:"trips"}],storeAs:"".concat(e.uid,"-trips")}]})),Object(o.connect)((function(e,t){return{trips:e.firestore.ordered["".concat(t.uid,"-trips")]}})))(_),B=n(210),q=n(4);function $(e){var t=e.friends;return r.a.createElement("option",{value:t.id},t.firstName)}var W=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).state={friendsInvolved:a.props.friendsInvolved},a.inputChangeMultiple=function(e){console.log(e.target.selectedOptions),a.setState({friendsInvolved:Array.from(e.target.selectedOptions,(function(e){return e.value}))});z.a.map(e.target.selectedOptions,(function(e,t){return e.value}))},a.formSubmit=function(e){e.preventDefault();var t=a.props,n=t.firestore,r=t.tripId,i=t.expenseId,l=t.uid,o={name:a.nameInput.current.value,expenseAmount:Number(a.amountInput.current.value),friendsInvolved:a.state.friendsInvolved,whoPaid:a.whoPaidInput.current.value};n.update({collection:"users",doc:l,storeAs:"".concat(r,"-expense"),subcollections:[{collection:"trips",doc:r},{collection:"expenses",doc:i}]},o)},a.nameInput=r.a.createRef(),a.amountInput=r.a.createRef(),a.friendsInvolvedInput=r.a.createRef(),a.whoPaidInput=r.a.createRef(),a}return Object(N.a)(n,[{key:"renderFriend",value:function(){var e=this.props,t=e.friends,n=e.whoPaid;return r.a.createElement("select",{multiple:!1,defaultValue:n,className:"form-control",id:"whoPaid",type:"text",name:"whoPaid",ref:this.whoPaidInput},r.a.createElement("option",{value:""},"Select Option"),z.a.map(t,(function(e,t){return r.a.createElement("option",{value:e.id},e.firstName)})))}},{key:"renderFriendsInvolved",value:function(){var e=this.props,t=e.friendsInvolved,n=e.friends,a=e.uid;console.log(this.props);var i=r.a.createElement("select",{multiple:!0,defaultValue:t,onChange:this.inputChangeMultiple,className:"form-control",id:"friendsInvolved",type:"text"},z.a.map(n,(function(e,t){return r.a.createElement($,{key:e.id,friends:e,uid:a})})));return r.a.createElement("div",null,i)}},{key:"render",value:function(){var e=this.props,t=e.expense,n=e.amount;return console.log(this.props),this.props?r.a.createElement("div",null,r.a.createElement("div",{className:"card mb-4 mt-4 "},r.a.createElement("div",{className:"card-header"},"Edit Expense"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Expense Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"expense name",minLength:"2",required:!0,ref:this.nameInput,defaultValue:t})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"expenseAmount"},"Amount"),r.a.createElement("input",{type:"number",className:"form-control",name:"amount",minLength:"1",required:!0,ref:this.amountInput,defaultValue:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Friends Involved ",""),this.renderFriendsInvolved()),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Who Paid"),this.renderFriend()),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-block"}))))):r.a.createElement(P,null)}}]),n}(a.Component),X=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).handleDelete=function(){var e=a.props,t=e.expenses,n=e.firestore,r=e.tripId,i=e.uid;n.delete({collection:"users",doc:i,storeAs:"".concat(r.id,"-expenses"),subcollections:[{collection:"trips",doc:r},{collection:"expenses",doc:t.id}]})},a.handleInputChange=function(e){var t=e.target,n="isIncluded"===t.name?t.checked:t.value,r=t.name;a.setState(Object(M.a)({},r,n))},a.addIncluded=function(e,t){var n=a.props,r=n.firestore,i=n.tripId,l=n.uid,o={friendsInvolved:e.friendsInvolved.concat(t)};r.update({collection:"users",doc:l,storeAs:"".concat(i,"-expenses"),subcollections:[{collection:"trips",doc:i},{collection:"expenses",doc:e.id}]},o)},a.removeIncluded=function(e,t){var n=a.props,r=n.firestore,i=n.tripId,l=n.uid,o={friendsInvolved:e.friendsInvolved.filter((function(e){return!t.includes(e)}))};r.update({collection:"users",doc:l,storeAs:"".concat(i,"-expenses"),subcollections:[{collection:"trips",doc:i},{collection:"expenses",doc:e.id}]},o)},a.state={isIncluded:!1,showForm:!1},a}return Object(N.a)(n,[{key:"renderWhoPaid",value:function(e){var t=this.props.friendsObj;return t&&t[e]?r.a.createElement(q.Td,null,t[e].firstName):r.a.createElement(q.Td,null,"''")}},{key:"renderEditForm",value:function(e){var t=this.state.showForm,n=this.props,a=n.expenses,i=n.friends,l=n.firestore,o=n.tripId,s=n.uid;if(t)return r.a.createElement(W,{expenseId:e,expense:a.name,amount:a.expenseAmount,friendsInvolved:a.friendsInvolved,whoPaid:a.whoPaid,friends:i,tripId:o,firestore:l,uid:s})}},{key:"renderExpenseTable",value:function(){var e=this,t=this.props,n=(t.expensesObj,t.expenses),a=t.friends,i=(t.friendsObj,n.friendsInvolved),l=this.state.showForm,o=r.a.createElement("svg",{className:"bi bi-pencil-square",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",cursor:"pointer"},r.a.createElement("path",{d:"M15.502 1.94a.5.5 0 010 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 01.707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 00-.121.196l-.805 2.414a.25.25 0 00.316.316l2.414-.805a.5.5 0 00.196-.12l6.813-6.814z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 002.5 15h11a1.5 1.5 0 001.5-1.5v-6a.5.5 0 00-1 0v6a.5.5 0 01-.5.5h-11a.5.5 0 01-.5-.5v-11a.5.5 0 01.5-.5H9a.5.5 0 000-1H2.5A1.5 1.5 0 001 2.5v11z",clipRule:"evenodd"}));return Object(c.isEmpty)(n)?"loading":r.a.createElement(q.Tr,{key:n.id},r.a.createElement(q.Td,null,n.name,this.renderEditForm(n.id),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("svg",{className:"bi bi-trash-fill ml-2",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",onClick:this.handleDelete,cursor:"pointer"},r.a.createElement("path",{fillRule:"evenodd",d:"M2.5 1a1 1 0 00-1 1v1a1 1 0 001 1H3v9a2 2 0 002 2h6a2 2 0 002-2V4h.5a1 1 0 001-1V2a1 1 0 00-1-1H10a1 1 0 00-1-1H7a1 1 0 00-1 1H2.5zm3 4a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7a.5.5 0 01.5-.5zM8 5a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7A.5.5 0 018 5zm3 .5a.5.5 0 00-1 0v7a.5.5 0 001 0v-7z",clipRule:"evenodd"})),r.a.createElement("span",{className:"ml-2",onClick:function(){return e.setState({showForm:!l})}},l?r.a.createElement("button",{className:"btn-danger"},r.a.createElement("i",null,"Close")):o))),this.renderWhoPaid(n.whoPaid),r.a.createElement(q.Td,null,"$",parseFloat(n.expenseAmount/n.friendsInvolved.length).toFixed(2)),z.a.map(a,(function(t,a){return i.includes(t.id)?r.a.createElement(q.Td,{key:t.id},r.a.createElement("svg",{className:"bi bi-check-box",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",cursor:"pointer",onClick:function(){return e.removeIncluded(n,t.id)}},r.a.createElement("path",{fillRule:"evenodd",d:"M15.354 2.646a.5.5 0 010 .708l-7 7a.5.5 0 01-.708 0l-3-3a.5.5 0 11.708-.708L8 9.293l6.646-6.647a.5.5 0 01.708 0z",clipRule:"evenodd"}),r.a.createElement("path",{fillRule:"evenodd",d:"M1.5 13A1.5 1.5 0 003 14.5h10a1.5 1.5 0 001.5-1.5V8a.5.5 0 00-1 0v5a.5.5 0 01-.5.5H3a.5.5 0 01-.5-.5V3a.5.5 0 01.5-.5h8a.5.5 0 000-1H3A1.5 1.5 0 001.5 3v10z",clipRule:"evenodd"}))):r.a.createElement(q.Td,{key:t.id},r.a.createElement("svg",{className:"bi bi-x-square",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",cursor:"pointer",onClick:function(){return e.addIncluded(n,t.id)}},r.a.createElement("path",{fillRule:"evenodd",d:"M14 1H2a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V2a1 1 0 00-1-1zM2 0a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2H2z",clipRule:"evenodd"}),r.a.createElement("path",{fillRule:"evenodd",d:"M11.854 4.146a.5.5 0 010 .708l-7 7a.5.5 0 01-.708-.708l7-7a.5.5 0 01.708 0z",clipRule:"evenodd"}),r.a.createElement("path",{fillRule:"evenodd",d:"M4.146 4.146a.5.5 0 000 .708l7 7a.5.5 0 00.708-.708l-7-7a.5.5 0 00-.708 0z",clipRule:"evenodd"})))})),r.a.createElement(q.Td,null,"$",parseFloat(n.expenseAmount).toFixed(2)))}},{key:"render",value:function(){return this.renderExpenseTable()}}]),n}(a.Component),Q=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,storeAs:"".concat(e.tripId,"-expenses"),subcollections:[{collection:"trips",doc:e.tripId},{collection:"expenses"}]},{collection:"users",doc:e.uid,storeAs:"".concat(e.tripId,"-friends"),subcollections:[{collection:"trips",doc:e.tripId},{collection:"friends"}]}]})),Object(o.connect)((function(e,t){var n=e.firestore.data;return{expensesObj:n["".concat(t.tripId,"-expenses")],friendsObj:n["".concat(t.tripId,"-friends")]}})))(X);function J(e){return Object(c.useFirestoreConnect)((function(){return[{collection:"friends",doc:e}]})),Object(o.useSelector)((function(t){var n=t.firestore.data;return n.friends&&n.friends[e]}))}var Y=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).addTotalExpenses=function(){var e=a.props.expenses,t=0;for(var n in e)t+=Number(e[n].expenseAmount);return t},a.addTotalPaidExpenses=function(e){var t=0;for(var n in e)t+=Number(e[n]);return t},a.state={showForm:!1,expense:"",amount:0,friendsInvolved:[""],whoPaid:"",total:0,totals:{}},a}return Object(N.a)(n,[{key:"renderFriend",value:function(){var e=this.props.friends,t=r.a.createElement("select",{multiple:!1,value:this.state.whoPaid,onChange:this.inputChange,id:"whoPaid",type:"text",name:"whoPaid"},r.a.createElement("option",{value:""},"Select Option"),z.a.map(e,(function(e,t){return r.a.createElement(J,{key:e.id,friends:e})})));return Object(c.isEmpty)(e)?r.a.createElement(P,null):r.a.createElement("div",null,t)}},{key:"renderFriendsInvolved",value:function(){var e=this,t=this.props.friends,n=this.state.friendsInvolved,a=r.a.createElement("select",{multiple:!0,value:n,onChange:this.inputChangeMultiple,id:"friendsInvolved",type:"text"},z.a.map(t,(function(t,n){return r.a.createElement($,{key:t.id,friends:t,uid:e.props.uid})})));return r.a.createElement("div",null,a)}},{key:"renderExpense",value:function(){var e=this,t=this.props,n=t.expenses,a=t.friends,i=t.firestore,l=t.tripId,o=z.a.map(n,(function(t,n){return r.a.createElement(Q,{key:t.id,expenses:t,friends:a,firestore:i,tripId:l,uid:e.props.uid})}));return Object(c.isEmpty)(n)||Object(c.isEmpty)(a)?r.a.createElement(q.Tr,null,r.a.createElement(q.Td,{className:"mt-4"},r.a.createElement("h4",null,"You have no expenses logged!"))):o}},{key:"totalPerPerson",value:function(){var e=this.props,t=e.friends,n=e.expenses,a={};return Object(c.isEmpty)(n)||Object(c.isEmpty)(t)||z.a.map(t,(function(e,t){var r,i=Object(B.a)(n);try{for(i.s();!(r=i.n()).done;){var l=r.value;if(a[e.id]&&l.friendsInvolved.includes(e.id)){var o=l.expenseAmount/l.friendsInvolved.length;a[e.id]+=o}else if(!a[e.id]&&l.friendsInvolved.includes(e.id)){var s=l.expenseAmount/l.friendsInvolved.length;a[e.id]=s}}}catch(c){i.e(c)}finally{i.f()}})),a}},{key:"renderTotalPerPerson",value:function(e){var t=this.props.friends;return z.a.map(t,(function(t,n){return e[t.id]?r.a.createElement(q.Td,{key:t.id},"$",parseFloat(e[t.id]).toFixed(2)):r.a.createElement(q.Td,{key:t.id},"$0")}))}},{key:"totalAmountPaidPerPerson",value:function(){var e=this.props,t=e.friends,n=e.expenses,a={};return Object(c.isEmpty)(n)||Object(c.isEmpty)(t)||z.a.map(t,(function(e,t){var r,i=Object(B.a)(n);try{for(i.s();!(r=i.n()).done;){var l=r.value;if(a[e.id]&&l.whoPaid.includes(e.id)){var o=l.expenseAmount;a[e.id]+=o}else if(!a[e.id]&&l.whoPaid.includes(e.id)){var s=l.expenseAmount;a[e.id]=s}else a[e.id]||(a[e.id]=0)}}catch(c){i.e(c)}finally{i.f()}})),a}},{key:"renderTotalAmountPaidPerPerson",value:function(){var e=this.props.friends,t=this.totalAmountPaidPerPerson();return z.a.map(e,(function(e,n){return t[e.id]?r.a.createElement(q.Td,{key:e.id},"$",t[e.id].toFixed(2)):r.a.createElement(q.Td,{key:e.id},"$0")}))}},{key:"renderTotalDifferencePerPerson1",value:function(){var e=this.props,t=e.friends,n=e.expenses,a=this.totalAmountPaidPerPerson(),r=this.totalPerPerson(),i={};Object(c.isEmpty)(n)||Object(c.isEmpty)(t)||z.a.map(t,(function(e,t){i[e.id]=0,a[e.id]&&(i[e.id]-=r[e.id]),i[e.id]+=a[e.id]}))}},{key:"renderTotalDifferencePerPerson",value:function(){var e=this.props,t=e.friends,n=e.expenses,a=this.totalAmountPaidPerPerson(),i=this.totalPerPerson(),l={};return Object(c.isEmpty)(n)||Object(c.isEmpty)(t)||z.a.map(t,(function(e,t){l[e.id]=0,l[e.id]+=a[e.id]-i[e.id]})),z.a.map(t,(function(e,t){if(l[e.id])return r.a.createElement(q.Td,{key:e.id},"$",l[e.id].toFixed(2))}))}},{key:"renderFriendHeader",value:function(){var e=this.props.friends,t=z.a.map(e,(function(e,t){return console.log(t),r.a.createElement(q.Th,{key:t},e.firstName)}));if(!Object(c.isEmpty)(e))return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"mt-4"},r.a.createElement(q.Table,{key:z.a.map(this.props.friends,(function(e,t){return t})),className:"table table-striped table-bordered"},r.a.createElement(q.Thead,null,r.a.createElement(q.Tr,null,r.a.createElement(q.Th,null,"Expense Name"),r.a.createElement(q.Th,null,"Who Paid"),r.a.createElement(q.Th,null,"Cost Per Person"),this.renderFriendHeader(),r.a.createElement(q.Th,null,"Expense Amount"))),r.a.createElement(q.Tbody,null,this.renderExpense(),r.a.createElement(q.Tr,null,r.a.createElement(q.Th,{colSpan:"3"},"Total Owed"),this.renderTotalPerPerson(this.totalPerPerson()),r.a.createElement(q.Td,{className:"table-success",style:{color:"black"}},r.a.createElement("strong",null,"$",this.addTotalPaidExpenses(this.totalPerPerson())))),r.a.createElement(q.Tr,null,r.a.createElement(q.Th,{colSpan:"3"},"Total Paid"),this.renderTotalAmountPaidPerPerson(),r.a.createElement(q.Td,{className:"table-success",style:{color:"black"}},r.a.createElement("strong",null,"$",this.addTotalPaidExpenses(this.totalAmountPaidPerPerson())))),r.a.createElement(q.Tr,null,r.a.createElement(q.Th,{colSpan:"3"},"Difference"),this.renderTotalDifferencePerPerson()))))}}]),n}(a.Component),G=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,storeAs:"".concat(e.tripId,"-expenses"),subcollections:[{collection:"trips",doc:e.tripId},{collection:"expenses"}]},{collection:"users",doc:e.uid,storeAs:"".concat(e.tripId,"-friends"),subcollections:[{collection:"trips",doc:e.tripId},{collection:"friends"}]}]})),Object(o.connect)((function(e,t){var n=e.firestore.ordered;return{expenses:n["".concat(t.tripId,"-expenses")],friends:n["".concat(t.tripId,"-friends")]}})))(Y),K=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(y.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={showForm:!1,expense:"",amount:0,friendsInvolved:[""],whoPaid:"",total:0},e.inputChange=function(t){e.setState(Object(M.a)({},t.target.name,t.target.value))},e.inputChangeMultiple=function(t){e.setState({friendsInvolved:Array.from(t.target.selectedOptions,(function(e){return e.value}))})},e.formSubmit=function(t){t.preventDefault();var n=e.state,a=n.expense,r=n.amount,i=n.friendsInvolved,l=n.whoPaid,o=e.props,s=o.firestore,c=o.uid;s.add({collection:"users",doc:c,subcollections:[{collection:"trips",doc:e.props.id},{collection:"expenses"}]},{name:a,expenseAmount:Number(r),friendsInvolved:i,whoPaid:l}).then((function(e){console.log("Document written with ID: ",e.id)})),e.setState({expense:"",amount:0,friendsInvolved:[""],whoPaid:""})},e.renderForm=function(){var t=e.state,n=t.showForm,a=t.expense,i=t.amount;if(n)return r.a.createElement("div",{className:"card  mt-3 pl-1"},r.a.createElement("div",{className:"card-header"},"Add Expense"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:e.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Cost"),r.a.createElement("input",{value:a,className:"form-control",onChange:e.inputChange,id:"friendNext",type:"text",name:"expense"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Amount"),r.a.createElement("input",{value:i,onChange:e.inputChange,className:"form-control",type:"number",id:"amount",name:"amount"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Friends Involved ",""),e.renderFriendsInvolved()),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Who Paid"),e.renderFriend()),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-success btn-block"}))))},e}return Object(N.a)(n,[{key:"renderFriend",value:function(){var e=this.props.friends;return r.a.createElement("select",{multiple:!1,value:this.state.whoPaid,onChange:this.inputChange,className:"form-control",id:"whoPaid",type:"text",name:"whoPaid"},r.a.createElement("option",{value:""},"Select Option"),z.a.map(e,(function(e,t){return r.a.createElement("option",{value:e.id},e.firstName)})))}},{key:"renderFriendsInvolved",value:function(){var e=this.props.friends,t=this.state.friendsInvolved,n=r.a.createElement("select",{multiple:!0,value:t,onChange:this.inputChangeMultiple,className:"form-control",id:"friendsInvolved",type:"text"},z.a.map(e,(function(e,t){return r.a.createElement($,{key:e.id,friends:e})})));return r.a.createElement("div",null,n)}},{key:"render",value:function(){var e=this,t=this.state.showForm;return r.a.createElement("div",{style:{marginLeft:"5%",display:"flex",flexDirection:"column",justifyContent:"center"}},t?r.a.createElement("button",{className:"btn btn-danger btn-block mt-4",onClick:function(){return e.setState({showForm:!t})}},"Close"):r.a.createElement("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(){return e.setState({showForm:!t})}},"Add Expense"," "),r.a.createElement("div",null,r.a.createElement("div",{className:""},this.renderForm())))}}]),n}(a.Component),Z=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,storeAs:"".concat(e.id,"-expenses"),subcollections:[{collection:"trips",doc:e.id},{collection:"expenses"}]},{collection:"users",doc:e.uid,storeAs:"".concat(e.id,"-friends"),subcollections:[{collection:"trips",doc:e.id},{collection:"friends"}]}]})),Object(o.connect)((function(e,t){var n=e.firestore.ordered;return{friends:n["".concat(t.id,"-friends")],expenses:n["".concat(t.id,"-expenses")]}})))(K);function ee(e){return r.a.createElement("div",{className:"pl-4 pr-4"},r.a.createElement(G,{tripId:e.id,uid:e.uid}))}var te=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).formSubmit=function(e){e.preventDefault();var t=a.props,n=t.firestore,r=t.friend,i={firstName:a.firstNameInput.current.value};n.update({collection:"friends",doc:r.id},i)},a.firstNameInput=r.a.createRef(),a}return Object(N.a)(n,[{key:"render",value:function(){var e=this.props.friend;return this.props?r.a.createElement("div",null,r.a.createElement("div",{className:"card mb-4 mt-4 "},r.a.createElement("div",{className:"card-header"},"Edit Friend"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"firstName",minLength:"2",required:!0,ref:this.firstNameInput,defaultValue:e.firstName})),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-block"}))))):r.a.createElement(P,null)}}]),n}(a.Component),ne=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"friends",storeAs:"friend",doc:e.id}]})),Object(o.connect)((function(e,t){var n=e.firestore.data;return{friend:n.friend&&n.friend[t.id]}})))(te),ae=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(y.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={showForm:!1},e.handleDelete=function(){var t=e.props,n=t.friends,a=t.firestore,r=t.uid;a.delete({collection:"users",doc:r,subcollections:[{collection:"trips",doc:e.props.tripId},{collection:"friends",doc:n.id}]})},e}return Object(N.a)(n,[{key:"renderWhoseInvolved",value:function(e){var t=this.props.friend;return r.a.createElement(q.Td,null,t[e].firstName)}},{key:"renderEditForm",value:function(e){if(this.state.showForm)return r.a.createElement(ne,{id:e,firstName:this.props.friend.firstName})}},{key:"render",value:function(){var e=this,t=r.a.createElement("svg",{className:"bi bi-pencil-square",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",cursor:"pointer"},r.a.createElement("path",{d:"M15.502 1.94a.5.5 0 010 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 01.707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 00-.121.196l-.805 2.414a.25.25 0 00.316.316l2.414-.805a.5.5 0 00.196-.12l6.813-6.814z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 002.5 15h11a1.5 1.5 0 001.5-1.5v-6a.5.5 0 00-1 0v6a.5.5 0 01-.5.5h-11a.5.5 0 01-.5-.5v-11a.5.5 0 01.5-.5H9a.5.5 0 000-1H2.5A1.5 1.5 0 001 2.5v11z",clipRule:"evenodd"})),n=this.props.friends,a=this.state.showForm;return r.a.createElement(q.Tbody,null,r.a.createElement(q.Tr,{key:n.id},r.a.createElement(q.Td,null,n.firstName," ",r.a.createElement("div",{style:{float:"right"}},r.a.createElement("svg",{className:"bi bi-trash-fill ml-2",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",onClick:this.handleDelete,cursor:"pointer"},r.a.createElement("path",{fillRule:"evenodd",d:"M2.5 1a1 1 0 00-1 1v1a1 1 0 001 1H3v9a2 2 0 002 2h6a2 2 0 002-2V4h.5a1 1 0 001-1V2a1 1 0 00-1-1H10a1 1 0 00-1-1H7a1 1 0 00-1 1H2.5zm3 4a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7a.5.5 0 01.5-.5zM8 5a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7A.5.5 0 018 5zm3 .5a.5.5 0 00-1 0v7a.5.5 0 001 0v-7z",clipRule:"evenodd"})),this.renderEditForm(n.id),r.a.createElement("span",{className:"ml-2",onClick:function(){return e.setState({showForm:!a})}},a?r.a.createElement("button",null,r.a.createElement("i",null,"Close")):t)))))}}]),n}(a.Component),re=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).inputChange=function(e){a.setState(Object(M.a)({},e.target.name,e.target.value))},a.formSubmit=function(e){e.preventDefault();var t=a.props,n=t.firestore,r=t.uid,i=a.state.firstName;n.add({collection:"users",doc:r,subcollections:[{collection:"trips",doc:a.props.id},{collection:"friends"}]},{firstName:i}).then((function(e){console.log("Document written with ID: ",e.id)})),a.setState({firstName:""})},a.renderForm=function(){var e=a.state,t=e.showForm,n=e.firstName;if(t)return r.a.createElement("div",{className:"card mb-4 mt-4 "},r.a.createElement("div",{className:"card-header"},"Add Friend"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:a.formSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{value:n,onChange:a.inputChange,id:"friendNext",type:"text",className:"form-control",name:"firstName"})),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-block"}))))},a.renderFriend=function(e){var t=a.props,n=t.friends,i=t.uid,l=z.a.map(n,(function(e,t){return r.a.createElement(ae,{key:e.id,friends:e,tripId:a.props.id,firestore:a.props.firestore,uid:i})}));return n?l:r.a.createElement(q.Tbody,null,r.a.createElement(q.Tr,null,r.a.createElement(q.Td,null,"Loading")))},a.state={showForm:!1,firstName:""},a}return Object(N.a)(n,[{key:"render",value:function(){var e=this,t=this.state.showForm;return r.a.createElement("div",{style:{marginLeft:"5%",display:"flex",flexDirection:"column",justifyContent:"center"}},t?r.a.createElement("button",{className:"btn btn-danger btn-block mt-4",onClick:function(){return e.setState({showForm:!t})}},"Close"):r.a.createElement("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(){return e.setState({showForm:!t})}},"Add Friend"),this.renderForm(),r.a.createElement(q.Table,{className:" mt-4"},r.a.createElement(q.Thead,null,r.a.createElement(q.Tr,null,r.a.createElement(q.Th,null,"Friend Name"))),this.renderFriend()))}}]),n}(a.Component),ie=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,storeAs:"".concat(e.id,"-friends"),subcollections:[{collection:"trips",doc:e.id},{collection:"friends"}]}]})),Object(o.connect)((function(e,t){return{friends:e.firestore.ordered["".concat(t.id,"-friends")]}})))(re);function le(e){var t=Object(S.f)().id;return r.a.createElement("div",null,r.a.createElement("div",{className:"nav-wrapper pl-3 pr-2",style:{},id:"sidebar"},r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{id:t,uid:e.uid}),r.a.createElement(ie,{id:t,uid:e.uid}))))}var oe=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"mainView"},r.a.createElement("nav",null,r.a.createElement(le,{id:this.props.id,uid:this.props.uid})),r.a.createElement("div",{className:"mainViewContainer"},r.a.createElement(ee,{id:this.props.id,uid:this.props.uid})))}}]),n}(a.Component),se=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var e=this;this.props.trips;return r.a.createElement("div",null,this.props.uid?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,r.a.createElement(S.c,null,r.a.createElement("div",null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body",style:{marginLeft:"15%",marginRight:"15%"}},r.a.createElement("h1",null,"All Trips"),r.a.createElement(V,{uid:this.props.uid}),r.a.createElement(U,{uid:this.props.uid}))),r.a.createElement("div",null,r.a.createElement(S.a,{path:"/trip/:id",render:function(t){var n=t.match;return r.a.createElement(oe,{id:n.params.id,uid:e.props.uid})}})))))):r.a.createElement(P,null))}}]),n}(a.Component),ce=Object(m.c)(Object(c.firestoreConnect)((function(e){return[{collection:"users",doc:e.uid,subcollections:[{collection:"trips"}],storeAs:"".concat(e.uid,"-trips")}]})),Object(o.connect)((function(e,t){return{trips:e.firestore.data["".concat(t.uid,"-trips")]}})))(se),ue=function(e,t){return{type:"NOTIFY_USER",message:e,messageType:t}},de=n(330),me=n.n(de),pe=function(e){var t=e.message,n=e.messageType;return r.a.createElement("div",{className:me()("alert",{"alert-success":"success"===n,"alert-danger":"error"===n})},t)},fe=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(y.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.onSubmit=function(t){t.preventDefault();var n=e.props,a=n.firebase,r=n.notifyUser,i=e.state,l=i.email,o=i.password;a.login({email:l,password:o}).catch((function(e){return r("Invalid Login Info","error")})).then(e.props.history.push("/"))},e.onChange=function(t){return e.setState(Object(M.a)({},t.target.name,t.target.value))},e}return Object(N.a)(n,[{key:"render",value:function(){console.log(this.props),console.log(this.state);var e=this.props.notify,t=e.message,n=e.messageType;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 mx-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},t?r.a.createElement(pe,{message:t,messageType:n}):null,r.a.createElement("h1",{className:"text-center pb-4 pt-3"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("i",{className:"fa fa-lock"}),"","Login")),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"text",className:"form-control",name:"email",required:!0,value:this.state.email,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"text",className:"form-control",name:"password",required:!0,value:this.state.password,onChange:this.onChange})),r.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"}))))))}}]),n}(a.Component),ve=Object(m.c)(Object(c.firebaseConnect)(),Object(o.connect)((function(e,t){return{notify:e.notify}}),{notifyUser:ue}))(fe),he=function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(y.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.onSubmit=function(t){t.preventDefault();var n=e.props,a=n.firebase,r=n.notifyUser,i=e.state,l=i.email,o=i.password;a.createUser({email:l,password:o}).catch((function(e){return r("User Already Exists","error")})).then(e.props.history.push("/"))},e.onChange=function(t){return e.setState(Object(M.a)({},t.target.name,t.target.value))},e}return Object(N.a)(n,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.props.notify,t=e.message,n=e.messageType;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 mx-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},t?r.a.createElement(pe,{message:t,messageType:n}):null,r.a.createElement("h1",{className:"text-center pb-4 pt-3"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("i",{className:"fa fa-lock"})," Register")),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"text",className:"form-control",name:"email",required:!0,value:this.state.email,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"text",className:"form-control",name:"password",required:!0,value:this.state.password,onChange:this.onChange})),r.a.createElement("input",{type:"submit",value:"Register",className:"btn btn-primary btn-block"}))))))}}]),n}(a.Component),be=Object(m.c)(Object(c.firebaseConnect)(),Object(o.connect)((function(e,t){return{notify:e.notify}}),{notifyUser:ue}))(he),Ee=(n(557),function(e){Object(w.a)(n,e);var t=Object(O.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var e=this.props.auth;return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(D,null)),r.a.createElement("main",{className:"main"},r.a.createElement(S.c,null,r.a.createElement(S.a,{exact:!0,path:"/login",component:A(ve)}),r.a.createElement(S.a,{exact:!0,path:"/register",component:A(be)}),r.a.createElement(S.a,{exact:!0,path:"/",component:T((function(){return r.a.createElement(ce,{uid:e.uid})}))}),r.a.createElement(S.a,{exact:!0,path:"/",component:A(P)}))),r.a.createElement("footer",null))}}]),n}(a.Component)),ge=Object(m.c)(Object(c.firebaseConnect)(),Object(o.connect)((function(e){return{auth:e.firebase.auth}})))(Ee);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(802);l.a.render(r.a.createElement(o.Provider,{store:g},r.a.createElement(c.ReactReduxFirebaseProvider,E,r.a.createElement(s.a,null,r.a.createElement(ge,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[335,1,2]]]);
//# sourceMappingURL=main.e960476b.chunk.js.map